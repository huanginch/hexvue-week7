import{Y as r,x as t,v as a}from"./index-c7ac2ae7.js";const{VITE_APP_URL:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"int-hexschool",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},d=r("authStore",{state:()=>({isLogged:!1}),actions:{signIn(e,o){this.isLoading=!0,t.post(`${i}/admin/signin`,{username:e,password:o}).then(s=>{this.isLogged=!0;const{token:n,expired:h}=s.data;document.cookie=`hexToken=${n}; expired=${new Date(h)};`,alert(s.data.message),a.push("/admin/products")}).catch(s=>{this.isLogged=!1,alert(s.response.data.message)})},signOut(){t.post(`${i}/logout`).then(e=>{alert(e.data.message),this.isLogged=!1,a.push("/")}).catch(e=>{alert(e.response.data.message)})},checkAuth(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");t.defaults.headers.common.Authorization=e,t.post(`${i}/api/user/check`).then(()=>{this.isLogged=!0}).catch(o=>{this.isLogged=!1,a.push("/"),alert(o.response.data.message)})}}});export{d as a};
